%   S A P F O   -   Sense APprehending Frame Operator   -   (c) Emil Páleš%                                                                 1991  %                    (part 11: INFERENCE MAECHANISM)segment(seginf).:- public questans/2:far.:- extrn print/1,sursen/6,pair/2:far.:- extrn synon/2:far.q :- recorded(mirabel,mirabel(NET),_),questans(NET,quest).cdx :- code_world(_,syntax),data_world(_,valency).cdm :- code_world(_,main),data_world(_,main).cdi :- code_world(_,inference),data_world(_,mind).questans(LLD,decl) :-    recordz(forest,LLD,Rf),implant(LLD,Rf),   !,write(' O.K.'),nl.questans(LLQ,quest) :-   lookfor(LLQ,Rf),recorded(forest,LLD,Rf),   LLQ=[[N,K1|L1]|_],   match_head(nil,LLQ,N,LLD,M),!,   code_world(_,syntax),data_world(_,valency),   sursen(Foc,Ak,M,nil,LLD,Q),   code_world(_,inference),data_world(_,mind),   printed(Q),   fail.questans(_,_) :- write(' Neviem.'),nl.implant(LLD,Rf) :- member([_,K|_],LLD),recordb(semnet,K,Rf),fail.implant(_,_) :- !.lookfor([],Rf) :- !.lookfor([[_,(_,0)|_]|LLQ],Rf) :- !,lookfor(LLQ,Rf).lookfor([[_,K|_]|LLQ],Rf) :- retrieveb(semnet,K,Rf),lookfor(LLQ,Rf).match_head(SP,LLQ,N,LLD,M) :-   member([N,K1|L1],LLQ),   member([M,K2|L2],LLD),   ifthen(SP\=nil,(pair(SP,XSP),pick(L1,XSP,_,L3),pick(L2,XSP,_,L4))),   unify(K1,K2),   match_tail(LLQ,L3,LLD,L4).match_tail(_,[],_,_) :- !.match_tail(LLQ,L1,LLD,L2) :-    L1=[SP,N|L3],pick(L2,SP,M,L4),   match_head(SP,LLQ,N,LLD,M),   match_tail(LLQ,L3,LLD,L4).unify(K1,K2) :-   K1=K2;   synon(K1,K2);   K1=(_,0);   K2=(_,0).pick([X,Y|L1],SP,N,[X,Y|L2]) :- pick(L1,SP,N,L2).pick([SP,N|L],SP,N,L) :- !.member(X,[]) :- fail.member(X,[H|T]) :- X=H;member(X,T).printed(Q) :- cdx,print(Q),cdi.