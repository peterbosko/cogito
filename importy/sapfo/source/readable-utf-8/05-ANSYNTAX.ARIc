%   S A P F O   -   Sense APprehending Frame Operator   -   (c) Emil P·leö%                                                                 1988  %                      (part 5 : SYNTAX, ANALYSIS):- segment(segsyn).:- public veta/5,fraza/4,casecat/2,casename/2,feaname/2,pair/2,member/2,        append/3,last/3,empty/3,attach/3,retachh/4:far.:- extrn disfar/2,leftval/5,rightval/5,prior/4,int/6,sema/2:far.v :- recorded(anabel,anabel(L),_),eraseall(farchart),   (fraza(L,NET,_,_);veta(hl,L,[X],NET,_)),show_tree(NET).i :- notrace,cdm,i.cdi :- code_world(_,inference),data_world(_,mind).cdm :- code_world(_,main),data_world(_,main).fraza(L0,Q,Pa,Ci) :- nomfraz(gr(_,_,Pa,Ci),_,Q,L0,L1),   (L1=[];L1=['.']).veta(KIN,S0,S26,Q32,info(In)) :-   senfield(gr(Ro,Zi,Ci,Os,Cs,Ca),sem(Rx,In,Ak,Vd),Ne,Tp,lst(S0,Sl,Ko,Sr)),   ifthen(KIN=hl,(ctr_set(1,1),eraseall(nofchart),eraseall(farchart))),   FL0=0,disfar(Ko,Q0),   ifthenelse(Sl=[],(Q14=Q0,FL8=FL0),(    ( (KIN==bezhl,S2=Sl,Q2=Q0,FL2=FL0);      (an(partik,sem(_,_),_,_,Sl,S2),Q2=Q0,FL2=FL0);      aktant(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q0,Q2,FL0,FL2,Sl,S2);      aktantq(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q0,Q2,FL0,FL2,Sl,S2);      (Tp=inf,       ((an(lpar(Ro,Ci),sem(In2,_,_),Ne2,Ko2,Sl,S2),LPA=1);        (an(indikat(Os,Cs,Ca),sem(In2,_,_),Ne2,Ko2,Sl,S2),IND=1)       ),       (In2=mod;In2=faz),       MOD=1,FL2=FL0,       attachh(Q0,[In2,[Ko2]],Q2));      (an(aux(Os,Cs,Ca,Ro),_,Ne3,byt,Sl,S2),       Q2=Q0,FL2=FL0,((Ca=fut,FUT=1,Tp=inf);(Ca=min,FUT=0,Tp=lpar,PAST=1))      )    ),    ((S2=[by|S4],FUT\==1,Q4=Q2,KND=1);     (Q4=Q2,S4=S2)    ),    ((FUT\==1,Tp\==ind,an(aux(Os,Cs,prez,Ro),_,_,byt,S4,S6),Q6=Q4);     (Q6=Q4,S6=S4)    ),    ((Rx\==nezv,Ak\==pas,S6=[Rx|S8],Q8=Q6);     (Rx==nezv,Q8=Q6,S8=S6)    ),    ((an(aux(Os,Cs,Ca,Ro),_,Ne10,byt,S8,S10),      ((Ca=min,FUT=0,MOD=0,Tp=lpar,PAST=1);(FUT=1,Tp=inf)),      Q10=Q8);     (S10=S8,Q10=Q8)    ),    (aktant(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q10,Q12,FL2,FL8,S10,S12);     (S12=S10,Q12=Q10,FL8=FL2)    ),    ((FUT=1,MOD=0,Tp=inf,      an(infin,sem(In12,_,_),_,Ko12,S12,S14),      In12=mod,attachh(Q12,[In12,[Ko12]],Q14));     (FUT=0,MOD=0,Tp=inf,      ((an(lpar(Ro,Ci),sem(In12,_,_),Ne12,Ko12,S12,S14),LPA=1);       (an(indikat(Os,Cs,Ca),sem(In12,_,_),Ne12,Ko12,S12,S14),IND=1)      ),      In12=mod,attachh(Q12,[In12,[Ko12]],Q14)     );     (S14=S12,Q14=Q12)    ),    S14=[]   )  ),  ifthenelse(Sr=[],(S26=[],Q26=Q14,FL26=FL8),(   ((Sl==[],     ((Sr=[by|S16],FUT\==1,Tp\==imp,KND=1);      S16=Sr     ),     ((an(aux(Os,Cs,prez,Ro),_,_,byt,S16,S18),FUT\==1,Tp\==ind,Tp\==imp);      S18=S16     ),     ((S18=[Rx|S20],Rx\==nezv,Ak\==pas);      S20=S18     )    );    (Sl\==[],S20=Sr)   ),  ((infkon(Qc,S20,S26),    int(In,inf,_,_,SP20,X20),FL26=FL8+X20,    attach(Q14,Qc,Q26)   );   (((AKT1=1,aktant(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q14,Q22,FL8,FL22,S20,S22));     (AKT1=0,S22=S20,Q22=Q14,FL22=FL8)    ),    ((AKT1==1,AKT2=1,      aktant(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q22,Q24,FL22,FL24,S22,S24));     (AKT2=0,S24=S22,Q24=Q22,FL24=FL22)    ),    ((AKT2==1,aktant(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q24,Q26,FL24,FL26,S24,S26));     (S26=S24,Q26=Q24,FL26=FL24)    )  ))  )     ), (S26=['.'];S26=['!'];S26=['?'];S26=['...']), supply_agt(Ag,Os,Cs,In,Ak,Q26,Q28,FL26,FL28), ifthen(KIN=hl,(FL28=10;In=180;In=181;In=182;In=190)), ifthenelse((Ne==nie;Ne2==nie;Ne3==nie;Ne10==nie;Ne12==nie),             attachh(Q28,[neg,nie],Q30),             Q30=Q28), case([(KND==1,PAST==1) -> Cas='kondicion·l minul˝',       KND==1         -> Cas='kondicion·l',       PAST==1        -> Cas='predminul˝',       Tp==imp	     -> Cas='imperatÌv',      (LPA==1;Tp==lpar) -> Cas='minul˝',      (FUT==1;(Tp==ind,Ca=fut)) -> Cas='fut˙rum',      (IND==1;Tp==ind) -> Cas='prÈzens'      |true]), ((Cas=='imperatÌv',S26=['!']);(Cas\=='imperatÌv',S26\==['!'])), ifthenelse(nonvar(Cas),attachh(Q30,[cas,Cas],Q32),Q32=Q30).    nomfraz(gr(Ro,Zi,Pa,Ci),sem(Se,Rx,In),Q30,S0,S28) :-   S0\=[','|_],   subfield(gr(Ro,Zi,Pa,Ci),sem(Se,Rx,In),Ne,lst(S0,Sl,KO,Sr)),   disfar(KO,Q0),Q0=[[_,KOR|_]|_],   ifthenelse(Sl==[],Q20=Q0,(    ((Sl=[nie|S2],NEG=nie);     (S2=Sl,Q2=Q0)    ),    (an(adjpron(Os,Cs,Ro,Zi,Pa),sem(Dr,Urc,Vzd,Dor,SP2),Ne2,Ko2,S2,S4);     (S4=S2,Q4=Q2)    ),    S6=S4,Q6=Q4,    ((an(ord(Ro,Zi,Pa,Ci),_,_,Ko6,S6,S8),      ctr_inc(1,C6),attach(Q6,[ord,[C6,Ko6]],Q8));     (S8=S6,Q8=Q6)    ),    ((an(card(Ro,Zi,Pa,Ci),_,_,Ko8,S8,S10),      ctr_inc(1,C8),attach(Q8,[kar,[C8,Ko8]],Q10));     (an(spec(Ro,Zi,Pa,Ci),_,_,Ko8,S8,S10),      ctr_inc(1,C8),attach(Q8,[spe,[C8,Ko8]],Q10));     (an(mult(Ro,Zi,Pa,Ci),_,_,Ko8,S8,S10),      ctr_inc(1,C8),attach(Q8,[mul,[C8,Ko8]],Q10));     (S10=S8,Q10=Q8)    ),    ((an(adjekt(Ro,Zi,Pa,Ci,St10),sem(_,indprivl),Ne10,Ko10,S10,S12),      leftval(Ko10,St10,Ne10,KO,SPQ10),      ctr_inc(1,C10),attach(Q10,SPQ10,Q12)     );     (S12=S10,Q12=Q10)    ),    ((adjfraz(left,Tp,gr(Ro,Zi,Pa,Ci,St12),sem(_,_,In12,_,_),Qc,S12,S14),      ifthenelse(Tp=pas,int(In12,0,ak,Se12,SP12,_),                        int(In12,0,nom,Se12,SP12,_)),      sema(Se,Se12),pair(SP12,SPx12),attach(Q12,[SPx12|Qc],Q14)     );     (S14=S12,Q14=Q12)    ),    ((an(adjekt(Ro,Zi,Pa,Ci,St14),sem(_,Se14),Ne14,Ko14,S14,S16),      ADJ=1,Se14\==indprivl,      leftval(Ko14,St14,Ne14,KO,SPQ14),      ctr_inc(1,C14),attach(Q14,SPQ14,Q16)     );     (ADJ=0,S16=S14,Q16=Q14)    ),    ((ADJ=1,      an(adjekt(Ro,Zi,Pa,Ci,St16),sem(_,Se16),Ne16,Ko16,S16,S18),      Se16\==indprivl,      ifthen(((Se14=akvzt;Se14=klas),Se16=kval),fail),      ifthen(Se14=drprivl,Se16\=drprivl),      leftval(Ko16,St16,Ne16,KO,SPQ16),      ctr_inc(1,C16),attach(Q16,SPQ16,Q18)     );     (S18=S16,Q18=Q16)    ),    (((an(subst(_,_,Pa,Ci),_,_,Ko18,S18,S20);       an(gerund(Pa,Ci),_,_,Ko18,S18,S20)      ),      disfar(Ko18,Q19),attach(Q18,[(ifr,0)|Q19],Q20)     );     (S20=S18,Q20=Q18)    ),    S20=[]   )   ),   ifthenelse(Sr=[],(S28=[],Q28=Q20),(    ifthenelse(Rx=nezv,S22=Sr,Sr=[Rx|S22]),    ( ((S24=S22,Q24=Q20);       (nomfraz(gr(_,_,Pa22,_),sem(Se22,_,_),Qe,S22,S24),Qe=[[_,Ko22|_]|_],        rightval(KO,0,Pa22,Ko22,SP22),        attach(Q20,[SP22|Qe],Q24)       );       (an(adverb(_),sem(Se22,_,_),_,Ko22,S22,S24),        ctr_inc(1,C20),attach(Q20,[Se22,[C20,Ko22]],Q24)       )      ),      ((S24=S28,Q24=Q28);       (an(prepoz(Pa24,_),_,_,Pr,S24,S26),        nomfraz(gr(_,_,Pa24,_),sem(Se26,_,_),Qf,S26,S28),Qf=[[_,Ko26|_]|_],        rightval(KO,Pr,Pa24,Ko26,SP26),        attach(Q24,[SP26|Qf],Q28)       )      )    );    (adjfraz(right,Tp,gr(Ro,Zi,Pa,Ci,_),sem(_,_,In28,_,_),Qg,Sr,S28),     ifthenelse(Tp=pas,int(In28,0,ak,Se22,SP22,_),                       int(In28,0,nom,Se22,SP22,_)),     sema(Se,Se22),pair(SP22,SPx22),attach(Q20,[SPx22|Qg],Q28)    );    (infkon(Qg,Sr,S28),     rightval(KO,_,inf,_,SP22),     attach(Q20,[SP22|Qg],Q28)    );    (subveta(Pr28,'ktor˝',gr(Ro,Zi,Pa28,Ci),In,Qg,Sr,S28),     int(In,Pr28,Pa28,Se,SP28,_),pair(SP28,XSP28),     attach(Q20,[XSP28|Qg],Q28)    );    (subveta(_,'ûe',_,_,Qg,Sr,S28),     int(In,'ûe',_,_,SP28,_),attach(Q20,[SP28,Qg],Q28)    );    (subveta(Pr28,kto,gr(_,_,Pa28,_),Se28,Qg,Sr,S28),     int(In,Pr28,Pa28,Se28,SP28,_),attach(Q20,[SP28|Qg],Q28)    );    (subveta(Pr28,kam,_,SP28,Qg,Sr,S28),     attach(Q20,[SP28|Qg],Q28)    );    (Sr=[ako|S24],     nomfraz(_,_,Qg,S24,S28),     attach(Q20,[rel|Qg],Q28)    );    (Sr=[X|S24],(X=',';X='(';X=':';X='-'),     nomfraz(_,_,Qg,S24,S26),     attach(Q20,[isa|Qg],Q28),     S26=[Y|S28],case([X='(' -> Y=')'|X=Y])    )   )   ),   ifthenelse((NEG==nie;Ne==nie),attachh(Q28,[neg,nie],Q29),Q29=Q28),   ifthenelse(Ci=sg,Q30=Q29,attachh(Q29,[kar,viac],Q30)).adjfraz(left,Typ,gr(Ro,Zi,Pa,Ci,St),sem(Rx,_,In,_,_),Q6,S0,S6) :-  ( (S0=[X,Rx],(Rx=sa;Rx=si),     an(cpar(Ro,Zi,Pa,Ci,Typ),sem(In,Rx,_),Ne,Ko,[X|_],_),     ctr_inc(1,C4),Q4=[[C4,Ko]]    );    (last(S0,S2,[X]),     ((an(cpar(Ro,Zi,Pa,Ci,Typ),sem(In,Rx,_),Ne,Ko,[X],_),Ak=akt);      (an(tpar(Ro,Zi,Pa,Ci,St),sem(In,Rx,_),Ne,Ko,[X],_),Typ=pas,Ak=pas)     ),     ctr_inc(1,C0),Q0=[[C0,Ko]],     ((S4=S2,Q4=Q0);      aktant(_,In,Ak,nil,_,Q0,Q4,_,_,S2,S4)     )    )  ),  ifthenelse((Rx\=nezv,Ak=akt),S4=[Rx|S6],S6=S4),  ifthenelse(Ne==nie,attach(Q4,[neg,Ne],Q6),Q6=Q4),  S6=[].adjfraz(right,Typ,gr(Ro,Zi,Pa,Ci,St),sem(Rx,_,In,_,_),Q8,S0,S8) :-   ((an(cpar(Ro,Zi,Pa,Ci,Typ),sem(In,Rx,_),Ne,Ko,S0,S2),Ak=akt);    (an(tpar(Ro,Zi,Pa,Ci,St),sem(In,Rx,_),Ne,Ko,S0,S2),Ak=pas,Typ=pas)   ),   ctr_inc(1,C0),Q0=[[C0,Ko]],   ifthenelse((Rx\=nezv,Ak=akt),S2=[Rx|S4],S4=S2),   ((AKT=0,S6=S4,Q4=Q0);    (AKT=1,aktant(_,In,Ak,nil,_,Q0,Q4,_,_,S4,S6))   ),   ((S8=S6,Q6=Q4);    (AKT=1,aktant(_,In,Ak,nil,_,Q4,Q6,_,_,S6,S8))   ),   ifthenelse(Ne==nie,attachh(Q6,[neg,Ne],Q8),Q8=Q6).  advfraz(Q12,S2,S6) :-   ( (an(adverb(_),sem(mes),Ne2,Ko2,S2,S4),      ctr_inc(1,C2),ifthenelse(Ne2=nie,Q2=[[C2,Ko2,neg,nie]],Q2=[[C2,Ko2]]),      Q4=[mes|Q2]     );     (S4=S2,Q4=[])   ),   an(adverb(St),sem(Sem),Ne4,Ko4,S4,S6),   ctr_inc(1,C4),attach([[C4,Ko4]],Q4,Q6),   ifthenelse(Ne4=nie,attachh(Q6,[neg,nie],Q8),Q8=Q6),   case([St=kom -> attachh(Q8,[mes,viac],Q10),	 St=sup -> attachh(Q8,[mes,najviac],Q10)         |Q10=Q8]),   Q12=[Sem,Q10].infkon(Q6,S2,S10) :-   an(infin,sem(In,Rx,_),Ne,Ko,S2,S4),   ctr_inc(1,C2),Q2=[[C2,Ko]],Ak=akt,   ifthenelse(Rx==nezv,S6=S4,S4=[Rx|S6]),   ( (infkon(Qa,S6,S10),int(In,inf,_,_,SP,_),      attach(Q2,[SP,Qa],Q6)     );     ( ( (AKT=0,Q4=Q2,S8=S6);         (AKT=1,aktant(_,In,Ak,nil,_,Q2,Q4,_,_,S6,S8))       ),       ( (Q6=Q4,S10=S8);         (AKT=1,aktant(_,In,Ak,nil,_,Q4,Q6,_,_,S8,S10))       )     )   ).tranzkon(_,X,_,_,_) :- X==nil,!,fail.tranzkon(Q10,Ag,Cas,S0,S6) :-   an(tranz,sem(In,Rx,Vd),Ne,Ko,S0,S2),   ctr_inc(1,C),ifthen(nonvar(Ag),Ag=[_,Se]),   int(In,0,nom,Se,SP1,Fl),pair(SP1,SP),   Q0=[[C,Ko]],   ifthenelse(Rx=nezv,S4=S2,S2=[Rx|S4]),   (aktant(_,In,akt,nil,_,Q0,Q6,_,_,S4,S6);    (S6=S4,Q6=Q0)   ),   attachh(Q6,[cas,Cas],Q8),   Q10=[SP|Q8].subveta(Pr,'ktor˝',gr(Ro,Zi,Pa,Ci),In,Q,S0,S10) :-   S0=[','|S2],   (an(prepoz(Pa,_),_,_,Pr,S2,S4);(Pr=0,S4=S2)),   an(adjpron(_,Ci,Ro,Zi,Pa),sem(opyt,Urc,Vzd,Dor,_),ano,'k˝',S4,S6),   veta(bezhl,S6,S8,Q,info(In)),   (S8=[','|S10];(S8=[.],S10=S8)).subveta(_,'ûe',_,_,Q,S0,S8) :-   S0=[','|S2],   S2=[Con|S4],(Con='ûe';Con='Ëi';Con='aby'),   veta('ûe',S4,S6,Q,_),   (S6=[','|S8];(S6=['.'],S8=S6)).subveta(Pr,kto,gr(Ro,Zi,Pa,Ci),Se,Q,S0,S10) :-   S0=[','|S2],   (an(prepoz(Pa,_),_,_,Pr,S2,S4);(Pr=0,S4=S2)),   an(subpron(_,_,_,Zi,Pa),sem(opyt,Urc,Vzd,Dor,subj),ano,Ko,S4,S6),   veta(kto,S6,S8,Qa,_),   Qa=[[_,SL|_]|_],radix(SL,_,sl,cat(I,_,_,_,_,_,_)),   ifthenelse(Ko=(osoba,_),Se=[osoba],Se=[neosoba]),   int(I,Pr,Pa,Se,SP,_),pair(SP,XSP),   ctr_inc(1,X),ctr_inc(1,Y),   ifthenelse(Urc=urc,L1=[[X,Ko]],(code_world(W,main),pronafixname(Urc,Nam),                                   code_world(_,W),                                   attach([[X,Ko]],[atr,[Y,Nam]],L1))),   attach(L1,[XSP|Qa],Q),   (S8=[','|S10];(S8=['.'],S10=S8)).subveta(_,kam,_,SP,Q,S0,S6) :-   (S0=[','|S2];S0='zaËiatok vety'),   an(cirpron,sem(opyt,Urc,Vzd,Dor,SP),ano,Ko,S2,S4),   veta(bezhl,S4,S6,Qa,_),   code_world(W,main),pronafixname(Urc,Nam2),   code_world(_,W),   ctr_inc(1,X),ctr_inc(1,Y),pair(SP,XSP),   ifthenelse(Urc=urc,L1=[[X,Ko]],attach([[X,Ko]],[atr,[Y,Nam2]],L1)),   attach(L1,[XSP|Qa],Q),   (S6=[','|S8];(S6=['.'],S8=S6)).aktant(_,_,_,_,_,_,_,_,_,[],_) :- !,fail.aktant(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q1,Q2,Fl0,Fl1,S0,S4) :-   S0\==[],S0\==[.],(   ( (an(prepoz(Pa0,_),sem(SP0,_),_,Pr,S0,S2);      (Pr=0,S2=S0)     ),     nomfraz(gr(Ro2,Zi2,Pa0,Ci2),sem(Se2,_,_),Qb,S2,S4),     ifthenelse((Pa0=nom,Ak=akt),        (Ro2=Ro,Zi2=Zi,Ci2=Ci,Os=3,Qb=[[N|_]|_],         ifthenelse(var(Ag),(Ag=[N,Se2],Qc=Qb),attach(Qb,Ag,Qc))        ),	Qc=Qb),     ifthenelse(Ak=akt,Pa2=Pa0,case([Pa0=nom -> Pa2=ak,                                     Pa0=ins -> Pa2=nom                                    |Pa2=Pa0])),     int(In,Pr,Pa2,Se2,SP,X),     Fl1 is Fl0+X,Q=[SP|Qc],     attach(Q1,Q,Q2)   );   (tranzkon(Q,Ag,Cas,S0,S4),Fl1=Fl0,    ifthenelse(var(Ag),(Q2=Q1,Ag=Q),(Ag=[N,_],attachn(N,Q1,Q,Q2)))   );   (advfraz(Q,S0,S4),Fl1=Fl0);   (subveta(_,'ûe',_,Se,Q,S0,S4),    int(In,'ûe',_,_,SP,X),Fl1 is Fl0+X,attach(Q1,[SP|Q],Q2)   );   (subveta(Pr,kto,gr(_,Zi1,Pa1,_),Se,Q,S0,S4),    int(In,Pr,Pa1,Se,SP,X),Fl1 is Fl0+X,attach(Q1,[SP|Q],Q2)   );   (subveta(Pr,kam,_,SP,Q,S0,S4),    ifthenelse(int(In,'ûe',_,_,SP1,X),Fl1 is Fl0+X,(SP1=SP,Fl1=Fl0)),    attach(Q1,[SP1|Q],Q2)   );   ((an(cirpron,sem(ukaz,urc,_,ned,SP),ano,Ko,S0,S2);     (an(cirpron,sem(opyt,Urc,_,ned,SP),ano,Ko,S0,S2),Urc\==urc)),     subveta(Pr,kam,_,SP1,Q,S2,S4),     ifthenelse(Urc=urc,Q0=Q,(code_world(W,main),pronafixname(Urc,Nam),                               code_world(_,W),ctr_inc(1,Y),                               attach(Q,[atr,[Y,Nam]],Q0))),     attach(Q1,[SP|Q0],Q2)   );   ((an(prepoz(Pa,_),_,_,Pr,S0,S1);(Pr=0,S1=S0)),    (an(subpron(_,_,_,Zi1,Pa),sem(ukaz,urc,_,ned,_),ano,Ko,S1,S2);        (an(subpron(_,_,_,Zi1,Pa),sem(opyt,Urc,_,ned,_),ano,Ko,S1,S2),Urc\==urc)    ),    ((Zi1=nez,subveta(_,'ûe',_,Se,Q,S2,S4),      int(In,Pr,Pa,Se,SP,X));     (subveta(_,kto,gr(_,Zi1,_,_),Se,Q,S2,S4),      int(In,Pr,Pa,Se,SP,X))    ),    ifthenelse(Urc=urc,Q0=Q,(code_world(W,main),pronafixname(Urc,Nam),                             code_world(_,W),ctr_inc(1,Y),                             attach(Q,[atr,[Y,Nam]],Q0))),    Fl1 is Fl0+X,attach(Q1,[SP|Q0],Q2)   )).aktantq(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q1,Q2,Fl0,Fl1,S0,S4) :-   S0\==[],   (an(prepoz(Pa,_),sem(SP0,_),_,Pr,S0,S2);      (Pr=0,S2=S0)   ),   an(subpron(Os,Cs,Ro2,Zi2,Pa),sem(opyt,Urc,Dor,SP),Ne,Ko,S2,S4),   ctr_inc(1,N),Qb=[[N,Ko]],   ifthenelse((Pa0=nom,Ak=akt),      (Ro2=Ro,Zi2=Zi,Cs=Ci,Os=3,       ifthenelse(var(Ag),(Ag=[N,Se2],Qc=Qb),attach(Qb,Ag,Qc))      ),     Qc=Qb),   ifthenelse(Ak=akt,Pa2=Pa0,case([Pa0=nom -> Pa2=ak,                                   Pa0=ins -> Pa2=nom                                  |Pa2=Pa0])),   int(In,Pr,Pa2,Se2,SP,X),   Fl1 is Fl0+X,Q=[SP|Qc],   attach(Q1,Q,Q2).aktantq(gr(Ro,Zi,Ci,Os),In,Ak,Ag,Cas,Q1,Q2,Fl0,Fl0,S0,S4) :-    an(cirpron,sem(opyt,Urc,Vzd,Dor,SP),Ne,Ko,S0,S4),    ctr_inc(1,X),    attach(Q1,[SP,[X,Ko]],Q2).senfield(Gc,Sc,Ne,Tp,lst(L,Sl,Ko,Sr)) :-   L=[','|L1],   ( an(conj,_,_,_,L1,_);     ((an(prepoz(_,_),_,_,_,L1,L2);L2=L1),      (an(subpron(_,_,_,_,_),_,_,_,L2,_);an(adjpron(_,_,_,_,_),_,_,_,L2,_))     )   ),!,   delper(L1,L3,L4),   senfield(Gc,Sc,Ne,Tp,lst(L4,Sl1,Ko,Sr)),   append([','|L3],Sl1,Sl).senfield(gr(Ro,Zi,Ci,Os,Cs,Ca),sem(Rx,In,Ak,Vd),Ne,Tp,lst(S,Sl,Ko,Sr)) :-   ( ((an(indikat(Os,Cs,Ca),sem(In,Rx,Vd),Ne,Ko,S,Sr),Tp=ind);      (an(imper(Os,Cs),sem(In,Rx,_),Ne,Ko,S,Sr),Tp=imp);      (an(lpar(Ro,Ci),sem(In,Rx,_),Ne,Ko,S,Sr),Tp=lpar);      (an(infin,sem(In,Rx,_),Ne,Ko,S,Sr),Tp=inf)     ),In\==mod,In\==faz,Ak=akt,Sl=[]   );   ( an(aux(Os,Cs,Ca,Ro),_,Ne1,byt,S,S1),     an(tpar(Ro,Zi,nom,Ci,St),sem(In,_,_),Ne2,Ko,S1,Sr),     Ak=pas,Sl=[]   );   ( S=[X|S1],!,     senfield(gr(Ro,Zi,Ci,Os,Cs,Ca),sem(Rx,In,Ak,Vd),Ne,Tp,lst(S1,Sl1,Ko,Sr)),     Sl=[X|Sl1]   ).subfield(gr(Ro,Zi,Pa,Ci),sem(Se,Rx,In),Ne,lst(S,Sl,Ko,Sr)) :-   ( ((an(subst(Ro,Zi,Pa,Ci),sem(Se,Po),Ne,Ko,S,Sr),       ifthen((an(subst(_,Zi,Pa,Ci),_,_,Ko1,Sr,_),nth_char(0,Ko1,[X]),X<93),fail)      );      (an(gerund(Pa,Ci),sem(In,Rx,_),Ne,Ko,S,Sr),       Ro=str,Zi=nez,Se=abstr,Od=dev,Su=''      )     ),     ifthen(an(cpar(_,_,_,_,_),_,_,_,Sr,_),            an(cpar(Ro,Zi,Pa,Ci,_),_,_,_,Sr,_)),     ifthen(Od=dev,In=See),     Sl=[]   );   (   S=[X|S1],   subfield(gr(Ro,Zi,Pa,Ci),sem(Se,Rx,In),Ne,lst(S1,Sl1,Ko,Sr)),   Sl=[X|Sl1]   ).  supply_agt(Ag,Os,Cs,In,Ak,Q1,Q3,FL1,FL2) :-   ifthenelse((Os=3;Ag\=[_,[_|_]]),(!,Q3=Q1,FL2=FL1),    (ctr_inc(1,X),case([(Os=1,Cs=sg) -> A=ja,                        (Os=2,Cs=sg) -> A=ty,                        (Os=1,Cs=pl) -> A=my,                        (Os=2,Cs=pl) -> A=vy]),     ifthenelse(Ak=akt,Pa=nom,Pa=ak),     int(In,0,Pa,Sem,SP,FL),sema([ziv],Sem),FL2 is FL1+FL,     attach(Q1,[SP,[X,A]],Q2),     ifthenelse(nonvar(Ag),attachn(X,Q2,Ag,Q3),Q3=Q2)   )).casecat(sub,(SP,_)) :- member(SP,[ags,pcs,pdk,pro,ele,sta,edi,per,kog,afe,don,rec]),!.casecat(obj,(SP,_)) :- member(SP,[obj,pac,rez,mdf,dtk,fen,evo,frm]),!.casecat(dat,(SP,_)) :- member(SP,[ben,ads,kva,pos,par,rec]),!.casecat(fak,(SP,_)) :- (Cat=sub;Cat=obj;Cat=dat),casecat(Cat,(SP,_)),SP\=don,!,fail.casecat(fak,_) :- !.casename((xkaz,_),konzekvent) :- !.casename((xifr,_),identifikant) :- !.casename((xatr,_),atributant) :- !.casename((C,X),N) :- !,ifthenelse(nth_char(0,C,120),    (pair((C,_),(C1,_)),casename(C1,N1),     concat(['je ',N1,om],N2),atom_string(N,N2)),    (cases(L),member([C,N1],L),     ifthenelse(X=0,N=N1,       (int_text(X,X1),concat([N1,' ',X1],N2),atom_string(N,N2))),!)).casename(C,N) :- cases(L),member([C,N],L),!.feaname(Fea,(Nam,0)) :- member([Fea,Nam],[[osoba,osob],[lok,miest],    [ins,'n·stroj'],[mat,'l·tk'],[dej,dej],[org,'organiz·ci'],    [zviera,zvier],[stroj,stroj],[vec,vec],[jav,jav],[flor,rastlin]]).frazname(K,N) :- radix(K,_,Sd,_),!,    case([Sd=sl -> N='akcia:           ',          Sd=adj -> N='vlastnosù:       '|N='entita:         ']).frazname(K,'entita:         ').cases([[cas,'Ëas'],[neg,'negatÌv'],[faz,'f·za'],[asp,aspekt],[gra,'gradu·l'],     [dir,'direktÌv'],[mdl,'mod·l'],[mds,modus],     [ags,agens],[pro,procesor],[pdk,produktor],[ele,'elementÌv'],[sta,'statu·l'],     [obj,objekt],[pac,paciens],[rez,rezultant],[mdf,modifikant],[dtk,'deötruktant'],     [ben,benefaktor],[mat,'materi·l'],[ins,'inötrument'],[rea,'realiz·tor'],     [edi,editor],[ads,'adres·t'],[frm,'formatÌv'],[tem,'tematÌv'],     [per,perceptor],[fen,'fenomen·l'],[kog,kognizant],[afe,afektor],     [evo,'evok·tor'],[ant,atributant],[abt,'atrib˙t'],[kva,'kvalifik·tor'],     [ift,identifikant],[ifr,'identifik·tor'],[lok,'lokatÌv'],[via,'vi·l'],     [des,'destinatÌv'],[ori,'originatÌv'],[ter,'termin·l'],[exl,'exlokatÌv'],     [tmp,'tempor·l'],[ini,'inici·l'],[fre,'frekvent·l'],[fin,'fin·l'],     [dur,'duratÌv'],[psp,'perspektÌv'],[kaz,'kauzatÌv'],[kzk,konzekvent],     [mot,motivant],[knd,'kondicion·l'],[kcs,'koncesÌv'],[res,'respektÌv'],     [rel,'rel·tor'],[soc,'sociatÌv'],[sub,'substitu·l'],[suk,'sukcesÌv'],     [pos,'posesÌv'],[mes,'mesuratÌv'],[atr,'atrib˙t'],[par,'partitÌv'],     [oku,'okupatÌv'],[koh,'koherentÌv'],[exp,'explanatÌv'],[fra,'frakt·l'],     [kar,'kardin·l'],[ord,'ordin·l'],[kol,'kolektÌv'],[mul,'multiplikatÌv'],     [spe,'speciatÌv'],[dis,'distributÌv'],[don,donor],[rec,recipient],     [cen,cena]]).pair((SP1,No),(SP3,No)) :- ifthenelse(nth_char(0,SP1,120),                    substring(SP1,1,3,SP2),concat(x,SP1,SP2)),     atom_string(SP3,SP2),!.pair(S,S) :- atom(S),!.attachh([L1|L],Q,[L2|L]) :- append(L1,Q,L2).attach(Q,[],Q) :- !.attach(Q1,Q2,Q3) :-     Q1=[[X1,N1|L1]|A1],     Q2=[SP,[X2,N2|L2]|A2],pair(SP,SPx),     A=[[X1,N1,SP,X2|L1],[X2,N2,SPx,X1|L2]],     append(A1,A2,A3),append(A,A3,Q3).attachn(_,[],_,_) :- !,fail.attachn(N,LL1,Q,LL2) :- LL1=[[N|_]|_],!,attach(LL1,Q,LL2).attachn(N,[X|LL1],Q,[X|LL2]) :- attachn(N,LL1,Q,LL2).retachh([L1|L],SP,Val,[L2|L]) :- reth(L1,SP,Val,L2).reth([SP,_|L],SP,Val,[SP,Val|L]) :- !.reth([A,B|L1],SP,Val,[A,B|L2]) :- reth(L1,SP,Val,L2).detachh([L1|L],SP,[L2|L]) :- pick(L1,SP,_,L2).member(X,[]) :- fail.member(X,[H|T]) :- X=H;member(X,T).append([],L,L) :- !.append([H|T],L,[H|T1]) :- append(T,L,T1),!.dappend((Q1,R1),(Q2,R2),(Q3,R3)) :- append(Q1,Q2,Q3),append(R1,R2,R3).delper([M|L],[M],L) :- (M=',';M='.'),!.delper([X|L],[X|L1],L2) :- delper(L,L1,L2).show_net(L) :- cls,show_net1(L).show_net1([]) :- !.show_net1([L|LL]) :- write('  '),show_net2(L),nl,show_net1(LL).show_net2([]) :- !.show_net2([A|L]) :- write(A),write(' '),show_net2(L).show_tree(LL) :- cls,LL=[[N,KOR|_]|_],frazname(KOR,Nam),write(Nam),    ctr_set(4,0),showt1(N,LL,xnil,0).showt1(N,_,_,_) :- atom(N),!,write(N).showt1(N,LL,SPN,Y) :- member([N,Ko|L1],LL),write(Ko),    ctr_inc(4,_),Y1 is Y+3,empty(SPN,L1,L2),showt2(N,L2,LL,Y1).showt2(_,[],LL,_) :- !,ctr_dec(4,_).showt2(M,[SP1,N|L],LL,Y) :- ctr_is(4,X),tmove(X,Y),    pair(SP1,SP2),casename(SP1,N1),    string_length(N1,M1),M2 is 15-M1,substring($               $,0,M2,N2),    concat([N1,':',N2],N3),write(N3),    showt1(N,LL,(SP2,M),Y),ctr_inc(4,_),showt2(M,L,LL,Y).empty(_,[],[]) :- !.empty((SP,N),[SP,N|L],L) :- !.empty(SPN,[X,Y|L1],[X,Y|L2]) :- empty(SPN,L1,L2).last([X],[],[X]) :- !.last([X|L],[X|L2],Y) :- last(L,L2,Y).