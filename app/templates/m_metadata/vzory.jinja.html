{% extends "_main.jinja.html" %}
{% block title %}Morfologické vzory{% endblock %}
{% block main %}
    <div class="container-fluid" style="padding-top:80px; margin-bottom:30px;">
        <div class="row">
            <div class="col-sm-3">
                 <div class="well well-light">
                      <div class="form-horizontal">
                            <fieldset class="border p-2">
                                <legend>Vyhľadávanie</legend>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <input id="txtFVzor" class="form-control SearchOnChange SearchOnEnter" type="text" placeholder="Vložte vzor" aria-label="Search">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <select id="ddlFDruh" class="SearchOnChange SearchOnEnter form-control">
                                            <option value="" selected>Všetky</option>
                                            <option value="POD_M">Podstatné mená</option>
                                            <option value="PRID_M">Prídavné mená</option>
                                            <option value="SLOVESO">Slovesá</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <select id="ddlFSklonStupCas" class="SearchOnChange SearchOnEnter form-control">
                                            <option value="" selected>Všetky</option>
                                            <option value="sklon">Skloňovacie vzory</option>
                                            <option value="stup">Stupňovacie vzory</option>
                                            <option value="cas">Časovacie vzory</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <input id="txtFDeklinacia" class="form-control SearchOnChange SearchOnEnter" type="text" placeholder="Vložte deklinačný pattern" aria-label="Search">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <input id="txtFAlternacia" class="form-control SearchOnChange SearchOnEnter" type="text" placeholder="Vložte alternáciu" aria-label="Search">
                                    </div>
                                </div>
                            </fieldset>
                       </div>
                  </div>
            </div>
            <div class="col-sm-9">
                <h1>Zoznam vzorov</h1>
                <table class="table table-striped table-bordered" style="width:100%" id="zoznam_vzorov">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Vzor</th>
                            <th>Slovesný druh</th>
                            <th>Rod</th>
                            <th>Podrod</th>
                            <th>Skloň./Stup./Čas.</th>
                            <th>Deklinácia</th>
                            <th>Alternácia</th>
                            <th class="none">Popis</th>
                        </tr>
                    </thead>
                <tbody>
                </tbody>
                </table>
            </div>
        </div>
    </div>
<script>
    function bindHladaj() {
        $('.SearchOnEnter').keypress(function(event) {
            if (event.keyCode == 13) {
                nacitajVzory();
            }
        });
        $('.SearchOnChange').change(function(event) {
            nacitajVzory();
        });
    }

    function nacitajVzory(){
        $('#zoznam_vzorov').DataTable().ajax.reload();
    }

    $("#zoznam_vzorov").DataTable({
        responsive: true,
        serverSide: true,
        processing: true,
        searching: false,
        language: {
           url : "{{ url_for("static", filename="js/datatables_slovak.json") }}"
        },
        dom : '<<"row"<"col-sm-12"tr>><"row"<"col-lg-4 col-md-6"i><"col-lg-4 col-md-6"l><"col-lg-4 col-md-6"p>>>',
        ajax: {
            url : "{{ url_for("metadata.daj_vzory") }}",
            data : function ( d ) {

                d.vzor = $('#txtFVzor').val();
                d.typ = $('#ddlFDruh').val();
                d.deklinacia = $('#txtFDeklinacia').val();
                d.alternacia = $('#txtFAlternacia').val();
                d.SklonStupCas = $('#ddlFSklonStupCas').val();
            },
        },
        columns: [
            { data: "id" },
            { data: "vzor" },
            { data: "typ" },
            { data: "rod" },
            { data: "podrod" },
            { data: "sklon_stup" },
            { data: "deklinacia" },
            { data: "alternacia" },
            { data: "popis" },
        ],
        });

    $(document).ready(function () {
        bindHladaj();
    });
</script>

{% endblock %}
